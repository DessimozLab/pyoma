#!/usr/bin/env python

import pyoma.browser.external
import logging
logger = logging.getLogger('ncbi_linkout')

if __name__ == "__main__":
    import argparse
    parser = argparse.ArgumentParser(description="Update the type of pairwise orthology  in all genomes pairs")
    parser.add_argument('hdf5', help="Path to the hdf5 database")
    parser.add_argument('--out', default="./", help="folder where to write output files")
    parser.add_argument('--find-links', type=bool, default=True, help="find suitable links and create xml files")
    parser.add_argument('--push', type=bool, default=False, help="Push files to NCBI ftp host")
    parser.add_argument('-p', '--password', help="Password of NCBI ftp account")
    conf = parser.parse_args()
    logging.basicConfig(level=logging.INFO)

    if conf.find_links:
        pyoma.browser.external.run(conf.out, conf.hdf5)
    if conf.push:
        pyoma.browser.external.copy_to_ncbi(conf.out, conf.password)



